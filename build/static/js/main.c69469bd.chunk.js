(this.webpackJsonpfeedback=this.webpackJsonpfeedback||[]).push([[0],{99:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(0),a=n(50),r=n.n(a),i=n(31),s=n(2),u=n(11),b=function(){var e=Object(o.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),i=Object(u.a)(r,2),b=i[0],d=i[1];return 0!==b.length?Object(c.jsx)(s.a,{to:b}):Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:function(){return function(){var e=Math.random().toString(),t="/board?board=".concat(e);d(t)}()},children:"Create a room"}),Object(c.jsx)("input",{value:n,onChange:function(e){return a(e.target.value)},placeholder:"Room ID"}),Object(c.jsx)("button",{onClick:function(){""!==n?d("/board?board=".concat(n)):console.log("Room ID empty")},children:"Join an existing room using Room ID"})]})},d=n(52),j=n.n(d),l=n(53),f=n.n(l),h=function(){if(""===window.location.search)return Object(c.jsx)("div",{});var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),i=Object(u.a)(r,2),s=i[0],b=i[1],d=Object(o.useState)(""),l=Object(u.a)(d,2),h=l[0],O=l[1],m=Object(o.useState)(),p=Object(u.a)(m,2),v=p[0],x=p[1];if(Object(o.useEffect)((function(){if(""!==window.location.search){var e=j.a.parse(window.location.search).board;return O(e),x(f.a.connect("https://feedback-dysiewicz.herokuapp.com",{query:"board=".concat(e)})),function(){v&&v.disconnect()}}}),[]),!v)return Object(c.jsx)("div",{});v.on("message",(function(e){a(e)}));var g=function(e,t){v.emit("upvote",{message:e,value:t})};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Anonymous Feedback"}),Object(c.jsxs)("h2",{children:["RoomID: ",h]}),Object(c.jsx)("ul",{children:n.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsxs)("p",{children:["Message: ",e.message,", Upvotes: ",e.upvotes]}),Object(c.jsx)("button",{onClick:function(){return g(e,1)},children:"Upvote"}),Object(c.jsx)("button",{onClick:function(){return g(e,-1)},children:"Downvote"})]})},e.message)}))}),Object(c.jsx)("button",{onClick:function(){return function(e){var t,n="data:text/csv;charset=utf-8,",c=Object.keys(e[0]);c.forEach((function(e){return n+="".concat(e,",")})),n+="\n",e.forEach((function(e){c.forEach((function(t){n+="".concat(e[t],",")})),n+="\n"}));var o=encodeURI(n),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download","feedback.csv"),a.setAttribute("id","feedback-download-temp"),document.body.appendChild(a),a.click(),null===(t=document.getElementById("feedback-download-temp"))||void 0===t||t.remove()}(n)},children:"Download Feedback"}),Object(c.jsx)("input",{value:s,placeholder:"Write a message",onChange:function(e){return b(e.target.value)}}),Object(c.jsx)("button",{onClick:function(){return function(){var e={user:v.id,message:s,upvotes:0};v.emit("message",e),b("")}()},children:"Submit Message"})]})},O=function(){return Object(c.jsx)(i.a,{children:Object(c.jsxs)(s.d,{children:[Object(c.jsx)(s.b,{exact:!0,path:"/",component:b}),Object(c.jsx)(s.b,{path:"/board",component:h})]})})};r.a.render(Object(c.jsx)(O,{}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.c69469bd.chunk.js.map